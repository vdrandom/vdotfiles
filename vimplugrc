" support my own way of using plugins in vim / bash
autocmd BufRead *vimplugrc set ft=vim

let theme = 'gruvbox8'
let themebg = 'dark'
let lightline_theme = printf(theme)

function EnableTGC()
    let &t_8f = "\u1b[38;2;%lu;%lu;%lum"
    let &t_8b = "\u1b[48;2;%lu;%lu;%lum"
    let &tgc = 1
endfunction

if theme == 'PaperColor'
    let g:PaperColor_Theme_Options = {'theme': {
       \ 'default.dark':  {'allow_bold': 1, 'allow_italic': 1},
       \ 'default.light': {'allow_bold': 1, 'allow_italic': 1}
       \ }}
endif

if theme == 'gruvbox8'
    call EnableTGC()
    let themebg = 'dark'

    let g:gruvbox_transp_bg          = 1
    let g:gruvbox_plugin_hi_groups   = 1
    let g:gruvbox_filetype_hi_groups = 1
endif

if theme == 'solarized8'
    let lightline_theme = 'solarized'

    let g:solarized_use16            = 1
    let g:solarized_extra_hi_groups  = 1
    let g:solarized_termcolors       = 16
endif

" enable plugins
execute 'source' fnameescape(plug)
silent!call plug#begin(plugdir)

" plugin manager for self updates
Plug 'junegunn/vim-plug'

" general plugins
"Plug 'sheerun/vim-polyglot'
Plug 'itchyny/lightline.vim'
Plug 'junegunn/fzf'
Plug 'junegunn/fzf.vim'
Plug 'junegunn/vim-easy-align'
Plug 'mhinz/vim-signify'
Plug 'tpope/vim-commentary'
Plug 'tpope/vim-fugitive'
Plug 'tpope/vim-rsi'
Plug 'tpope/vim-vinegar'
Plug 'w0rp/ale', {'for': ['sh']}
Plug 'vimwiki/vimwiki', {'on': 'VimwikiIndex'}

" themes
Plug 'lifepillar/vim-gruvbox8'
Plug 'lifepillar/vim-solarized8'
Plug 'NLKNguyen/papercolor-theme'

call plug#end()

" easy-align
xmap <Leader>a <Plug>(EasyAlign)
nmap <Leader>a <Plug>(EasyAlign)

" fzf
nmap <Leader>ff :Files<CR>
nmap <Leader>fg :GFiles<CR>
nmap <Leader>fb :Buffers<CR>
nmap <Leader>fl :Lines<CR>
nmap <Leader>ft :Filetypes<CR>

" vimwiki
let g:vimwiki_list = [{'path': '$HOME/vimwiki/', 'syntax': 'markdown', 'ext': '.md'}]

" lightline
let g:lightline = {
   \ 'separator':    {'left': "\ue0b0", 'right': "\ue0b2"},
   \ 'subseparator': {'left': "\ue0b1", 'right': "\ue0b3"}
   \ }
let g:lightline['colorscheme'] = printf(lightline_theme)

if $TERM !~ '^linux'
    if has('gui_running')
        set guifont=Cascadia\ Code\ PL:h16
        set guicursor=a:blinkon0,a:block,i:ver1-Cursor/lCursor,r:hor1-Cursor/lCursor
        set guiheadroom=0 guioptions=aei mouse=a

        map <S-Insert> <MiddleMouse>
        map! <S-Insert> <MiddleMouse>
    endif

    let &bg = printf(themebg)
    execute printf('colorscheme %s', theme)
endif
